# 🎯 Google Calendar 봇 명령어 정확한 포맷 가이드

## 📝 **코덱스 지적사항 반영**

기존 가이드에서 명령어 예시가 모호했던 부분을 **파라미터 순서, 시간 포맷, 띄어쓰기**까지 정확히 명시합니다.

---

## 📅 **일정 조회 명령어**

### ✅ **올바른 형식**
```
일정
오늘 일정  
내일 일정
이번주 일정
```

### ✅ **지원하는 변형**
```
일정 보여줘
일정 확인
스케줄
스케줄 보여줘
오늘뭐해
내일뭐해
```

### ❌ **지원하지 않는 형식** 
```
일정을 보여줘          (조사 '을' 포함)
일정좀 보여줘          (좀 포함)
일   정               (띄어쓰기)
일정!!                (특수문자)
```

---

## ➕ **일정 추가 명령어**

### ✅ **기본 형식 (파라미터 순서 중요!)**
```
일정 추가 [제목] [날짜] [시간]
```

### 📊 **구체적 예시들**

#### **1. 자연어 날짜 + 시간**
```
✅ 일정 추가 회의 오늘 3시
✅ 일정 추가 점심약속 내일 12시  
✅ 일정 추가 병원 모레 오후 2시
```

#### **2. 정확한 날짜 + 시간**  
```
✅ 일정 추가 프레젠테이션 2024-01-15 14:00
✅ 일정 추가 치과예약 2024-01-16 09:30
✅ 일정 추가 데이트 2024-01-17 19:00
```

#### **3. 제목에 띄어쓰기 포함**
```
✅ 일정 추가 팀 회의 내일 3시
✅ 일정 추가 점심 먹기 오늘 12시
✅ 일정 추가 영화 보기 2024-01-15 20:00
```

### 📋 **파라미터 상세 규칙**

#### **[제목] 규칙**
- **한글/영문/숫자** 모두 가능
- **띄어쓰기** 포함 가능 
- **특수문자** 최소화 권장
- **최대 길이**: 50자 권장

#### **[날짜] 지원 형식**
```
자연어:     오늘, 내일, 모레
정확한:     2024-01-15, 2024-12-31  
간단한:     01-15, 12-31 (올해 기준)
```

#### **[시간] 지원 형식**
```
간단한:     3시, 14시, 9시
정확한:     14:00, 09:30, 23:59
자연어:     오후 3시, 오전 9시, 저녁 7시
24시간:     23:59, 00:30, 13:45
```

### ❌ **잘못된 명령어들**
```
❌ 일정추가 회의 내일 3시         (띄어쓰기 없음)
❌ 일정 추가 내일 3시 회의         (날짜/시간 순서 바뀜)  
❌ 일정 추가 회의 25시            (잘못된 시간)
❌ 일정 추가 회의 2024/01/15      (잘못된 날짜 형식)
❌ 추가 회의 내일 3시             ('일정' 누락)
```

---

## 🗑️ **일정 삭제 명령어**

### ✅ **올바른 형식**
```
일정 삭제 [번호]
삭제 [번호]
```

### 📊 **구체적 예시들**
```
✅ 일정 삭제 1
✅ 일정 삭제 2  
✅ 삭제 3
✅ 일정 삭제 10
```

### ❗ **중요 사항**
- 반드시 **먼저 일정 조회**로 번호를 확인
- 번호는 일정 조회 결과의 **순서번호**
- 삭제 후에는 **번호가 다시 매겨짐**

### ❌ **지원하지 않는 형식**
```
❌ 일정 삭제 회의              (이름으로 삭제 불가)
❌ 삭제1                     (띄어쓰기 없음)
❌ 일정 삭제 첫번째            (한글 번호)
❌ 일정 삭제 -1               (음수)
```

---

## 🕐 **빈시간 조회 명령어**

### ✅ **올바른 형식**
```
빈시간 [날짜]
```

### 📊 **구체적 예시들**
```
✅ 빈시간 오늘
✅ 빈시간 내일  
✅ 빈시간 모레
✅ 빈시간 2024-01-15
```

### 🕐 **시간대 설정**
- **기본 근무시간**: 09:00 - 19:00 (오전 9시 - 오후 7시)
- 서버 설정에서 변경 가능

### ❌ **지원하지 않는 형식**
```
❌ 빈시간체크 오늘            ('조회' 형태 필요)
❌ 빈 시간 오늘              (띄어쓰기)
❌ 빈시간 이번주             (주간 단위 미지원)
❌ 빈시간                   (날짜 누락)
```

---

## ❓ **도움말 및 상태 확인**

### ✅ **올바른 형식**
```
캘린더 도움말
일정 도움말
서버 상태
캘린더 상태
서버 테스트
```

### 📊 **응답 예시**
```
서버 상태 → "✅ Google Calendar 서버가 정상 작동 중입니다."
도움말 → 전체 명령어 리스트 출력
```

---

## 🔧 **고급 명령어 (API 직접 호출)**

### 💻 **JSON API 형식 (개발자용)**
```json
POST /api/calendar/events
{
  "action": "add_event",
  "title": "회의",
  "datetime": "내일 3시",
  "description": "팀 미팅"
}
```

### 💻 **빈시간 API**
```json  
POST /api/calendar/free-busy
{
  "date": "오늘"
}
```

---

## ⚡ **명령어 처리 흐름**

### 🔄 **메신저봇 → 서버 전송 과정**
```
1. 사용자가 카톡에 입력: "일정 추가 회의 내일 3시"
2. 메신저봇이 문자열 그대로 서버에 전송
3. 서버가 자연어 파싱 수행
4. Google Calendar API 호출  
5. 결과를 메신저봇에 반환
6. 메신저봇이 카톡방에 응답 출력
```

### 🎯 **파싱 우선순위**
1. **정확한 명령어** (일정 추가, 일정 삭제 등)
2. **자연어 명령어** (오늘 일정, 내일 일정 등)  
3. **단축 명령어** (일정, 삭제 등)
4. **도움말** (이해할 수 없는 명령어 시)

---

## 🚨 **자주 하는 실수와 해결법**

### ❌ **실수 1: 파라미터 순서 바뀜**
```
잘못: 일정 추가 내일 3시 회의
올바른: 일정 추가 회의 내일 3시
```

### ❌ **실수 2: 날짜 형식 틀림**
```
잘못: 2024/01/15, 01.15, 1-15  
올바른: 2024-01-15, 01-15, 내일
```

### ❌ **실수 3: 시간 형식 틀림**
```
잘못: 3:00PM, 오후3시, 15h
올바른: 15:00, 오후 3시, 3시
```

### ❌ **실수 4: 특수문자 사용**
```  
잘못: 일정@추가, 일정-삭제, 빈시간?
올바른: 일정 추가, 일정 삭제, 빈시간
```

---

## ✅ **테스트 체크리스트**

### 🔍 **기본 명령어 테스트**
- [ ] "일정" → 오늘 일정 조회 성공
- [ ] "내일 일정" → 내일 일정 조회 성공
- [ ] "서버 상태" → 연결 상태 확인 성공

### 🔍 **일정 추가 테스트**  
- [ ] "일정 추가 테스트 오늘 3시" → 추가 성공
- [ ] "일정 추가 회의 2024-01-15 14:00" → 추가 성공
- [ ] "일정 추가 점심 먹기 내일 12시" → 띄어쓰기 제목 성공

### 🔍 **빈시간 조회 테스트**
- [ ] "빈시간 오늘" → 빈 시간대 표시
- [ ] "빈시간 내일" → 내일 빈 시간대 표시  
- [ ] "빈시간 2024-01-15" → 특정 날짜 빈시간 표시

### 🔍 **오류 처리 테스트**
- [ ] "일정추가" → 도움말 출력 (띄어쓰기 없음)
- [ ] "일정 추가 회의" → 날짜/시간 누락 안내
- [ ] "빈시간" → 날짜 누락 안내

---

**🎯 결론: 정확한 파라미터 순서와 형식을 지키면 모든 명령어가 완벽하게 작동합니다!**

## 📞 **문의사항**
명령어가 작동하지 않으면:
1. **띄어쓰기** 확인
2. **파라미터 순서** 확인  
3. **날짜/시간 형식** 확인
4. **서버 상태** 먼저 확인